<nb-card accent="info"
         [nbSpinner]="isSubmitted"
         nbSpinnerStatus="info">
  <nb-card-header>{{ 'client.creation'|translate }}</nb-card-header>
  <nb-card-body>
    <nb-stepper>
      <nb-step [stepControl]="clientInfoForm" [label]="'client.create-form.client-info-step'|translate">
        <form [formGroup]="clientInfoForm" class="container-form">
          <div class="form-control-group">
            <label class="label" for="firstName">{{ 'client.create-form.first-name'| translate }}*</label>
            <input nbInput
                   fullWidth
                   id="firstName"
                   formControlName="firstName"
                   autofocus>
            <ng-container *ngIf="isFirstNameRequiredInput">
              <p class="caption status-danger">
                {{ 'client.create-form.first-name-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="form-control-group">
            <label class="label" for="lastName">{{ 'client.create-form.last-name'| translate }}</label>
            <input nbInput
                   fullWidth
                   id="lastName"
                   formControlName="lastName"
                   autofocus>
          </div>
          <div class="form-control-group toggle-switch-spacing">
            <nb-toggle labelPosition="start" status="info" (checkedChange)="onToggleAddressChange($event)" formControlName="hasAddress">{{'client.create-form.has-address'|translate}}</nb-toggle>
            <nb-toggle labelPosition="start" status="info" (checkedChange)="onToggleCarChange($event)" formControlName="hasCar">{{'client.create-form.has-car'|translate}}</nb-toggle>
          </div>
          <div class="actions">
            <button nbButton hero status="danger" (click)="onClose()">
              {{ 'actions.cancel'|translate }}
            </button>
            <button nbButton hero status="info" *ngIf="isClientInfoLastStep;else clientInfoNotLastStep"
                    [disabled]="!clientInfoForm.valid" (click)="onSubmit()">
              {{ clientInfoStepNextButtonText }}
            </button>
            <ng-template #clientInfoNotLastStep>
              <button nbButton hero status="info"
                      [disabled]="!clientInfoForm.valid"
                      nbStepperNext>
                {{ clientInfoStepNextButtonText }}
              </button>
            </ng-template>
          </div>
        </form>
      </nb-step>
      <nb-step [stepControl]="carInfoForm" [label]="'client.create-form.client-car-step'|translate" *ngIf="hasCarStep">
        <form [formGroup]="carInfoForm" class="container-form">
          <div class="form-control-group">
            <label class="label" for="merch">{{ 'car.merch'| translate }} *</label>
            <input nbInput
                   fullWidth
                   id="merch"
                   formControlName="merch"
                   autofocus>
            <ng-container *ngIf="isMerchRequiredInput">
              <p class="caption status-danger">
                {{ 'car.merch-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="form-control-group">
            <label class="label" for="model">{{ 'car.model'| translate }} *</label>
            <input nbInput
                   fullWidth
                   id="model"
                   formControlName="model"
                   autofocus>
            <ng-container *ngIf="isModelRequiredInput">
              <p class="caption status-danger">
                {{ 'car.model-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="form-control-group">
            <label class="label" for="plate">{{ 'car.plate'| translate }} *</label>
            <input nbInput
                   fullWidth
                   id="plate"
                   formControlName="plate"
                   autofocus>
            <ng-container *ngIf="isPlateRequiredInput">
              <p class="caption status-danger">
                {{ 'car.plate-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="form-control-group">
            <label class="label" for="color">{{ 'car.color'| translate }}</label>
            <input nbInput
                   fullWidth
                   id="color"
                   formControlName="color"
                   autofocus>
          </div>
          <div class="form-control-group">
            <label class="label" for="year">{{ 'car.year'| translate }}</label>
            <input nbInput
                   fullWidth
                   type="number"
                   id="year"
                   formControlName="year"
                   autofocus>
          </div>
          <div class="actions">
            <button nbButton hero status="info" nbStepperPrevious>
              {{ 'actions.previous'|translate }}
            </button>
            <button nbButton hero status="info" *ngIf="isCarLastStep;else carNotLastStep"
                    [disabled]="!carInfoForm.valid" (click)="onSubmit()">
              {{ carStepNextButtonText }}
            </button>
            <ng-template #carNotLastStep>
              <button nbButton hero status="info"
                      [disabled]="!carInfoForm.valid"
                      nbStepperNext>
                {{ carStepNextButtonText }}
              </button>
            </ng-template>
          </div>
        </form>
      </nb-step>
      <nb-step [stepControl]="addressInfoForm" [label]="'client.create-form.client-address-step'|translate" *ngIf="hasAddressStep">
        <form [formGroup]="addressInfoForm" class="container-form">
          <div class="form-control-group">
            <label class="label" for="street">{{ 'address.street'| translate }} *</label>
            <input nbInput
                   fullWidth
                   id="street"
                   formControlName="street"
                   autofocus>
            <ng-container *ngIf="isStreetRequiredInput">
              <p class="caption status-danger">
                {{ 'address.street-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="form-control-group">
            <label class="label" for="box">{{ 'address.box'| translate }}</label>
            <input nbInput
                   fullWidth
                   id="box"
                   formControlName="box"
                   autofocus>
          </div>
          <div class="form-control-group">
            <label class="label" for="postalCode">{{ 'address.postalCode'| translate }} *</label>
            <input nbInput
                   fullWidth
                   id="postalCode"
                   formControlName="postalCode"
                   autofocus>
            <ng-container *ngIf="isPostalCodeRequiredInput">
              <p class="caption status-danger">
                {{ 'address.postalCode-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="form-control-group">
            <label class="label" for="locality">{{ 'address.locality'| translate }} *</label>
            <input nbInput
                   fullWidth
                   id="locality"
                   formControlName="locality"
                   autofocus>
            <ng-container *ngIf="isLocalityRequiredInput">
              <p class="caption status-danger">
                {{ 'address.locality-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="form-control-group">
            <label class="label" for="country">{{ 'address.country'| translate }} *</label>
            <input nbInput
                   fullWidth
                   id="country"
                   formControlName="country"
                   autofocus>
            <ng-container *ngIf="isCountryRequiredInput">
              <p class="caption status-danger">
                {{ 'address.country-required'| translate }}
              </p>
            </ng-container>
          </div>
          <div class="actions">
            <button nbButton hero status="info" nbStepperPrevious>
              {{ 'actions.previous'|translate }}
            </button>
            <button nbButton hero status="info"
                    [disabled]="!addressInfoForm.valid"
                    (click)="onSubmit()">
              {{ 'actions.finish'|translate }}
            </button>
          </div>
        </form>
      </nb-step>
    </nb-stepper>
  </nb-card-body>
</nb-card>
